C51 COMPILER V9.55   MAIN                                                                  04/08/2020 22:49:34 PAGE 1   


C51 COMPILER V9.55, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN c:\Users\Administrator\Documents\Source\MCU\bujin\.\out\main.obj
COMPILER INVOKED BY: c:\Keil_v5\C51\BIN\C51.exe c:\Users\Administrator\Documents\Source\MCU\bujin\.\src\main.c SMALL OMF
                    -2 ROM(LARGE) OPTIMIZE(8,SPEED) REGFILE(c:\Users\Administrator\Documents\Source\MCU\bujin\.\out\main.ORC) INCDIR(c:\Users
                    -\Administrator\Documents\Source\MCU\bujin\.\dependence;c:\Users\Administrator\Documents\Source\MCU\bujin\.\dependence\bu
                    -ild-in;c:\Users\Administrator\Documents\Source\MCU\bujin\.\dependence\build-in\STD;c:\Keil_v5\C51\INC) PRINT(c:\Users\Ad
                    -ministrator\Documents\Source\MCU\bujin\.\out\main.lst) TABS(2) OBJECT(c:\Users\Administrator\Documents\Source\MCU\bujin\
                    -.\out\main.obj)

line level    source

   1          #include "stc8.h"
   2          #include <intrins.h>
   3          
   4          sbit Y0=P2^5;
   5          sbit Y1=P2^4;
   6          sbit Y2=P2^3;
   7          sbit Y3=P2^2;
   8          sbit Y4=P4^2;
   9          sbit Y5=P2^0;
  10          
  11          sbit X0=P1^2;
  12          sbit X1=P1^3;
  13          sbit X2=P1^4;
  14          sbit X3=P4^4;
  15          sbit X4=P1^5;
  16          sbit X5=P1^6;
  17          sbit X6=P1^7;
  18          sbit X7=P3^2;
  19          sbit X8=P3^3;
  20          sbit X9=P3^4;
  21          
  22          
  23          sbit PUL=P0^6;
  24          sbit DIR=P0^4;
  25          
  26          
  27          void Runmotor(unsigned int);
  28          void Tohome();
  29          void Run();
  30          int Ishome();
  31          
  32          unsigned int i;
  33          
  34          void  delay_ms(unsigned int ms)
  35          {
  36   1           unsigned int i;
  37   1         do{
  38   2              i = 24000000L / 13000;
  39   2            while(--i)  ;   //14T per loop
  40   2           }while(--ms);
  41   1      }
  42          
  43          void Delay100us()   //@24.000MHz
  44          {
  45   1        unsigned char i, j;
  46   1      
  47   1        i = 4;
  48   1        j = 27;
  49   1        do
  50   1        {
C51 COMPILER V9.55   MAIN                                                                  04/08/2020 22:49:34 PAGE 2   

  51   2          while (--j);
  52   2        } while (--i);
  53   1      }
  54          
  55          
  56          
  57          
  58          int main() 
  59          {
  60   1           P2=0x00;
  61   1           P0M1=0x00;
  62   1           P0M0=0X00;
  63   1           P2M0=0xff;
  64   1           P2M1=0x00;
  65   1           delay_ms(100);
  66   1           Tohome();
  67   1           while(1)
  68   1           {
  69   2                if(X3==0&&X4!=0&&X2!=0)
  70   2                {
  71   3                     delay_ms(5);
  72   3                     if(X3==0)Run();
  73   3                }
  74   2           }
  75   1      
  76   1           return 0;
  77   1      }
  78          
  79          void Run()
  80          {
  81   1           Y0=1;
  82   1           while(1)
  83   1           {
  84   2                if(X4==0)
  85   2                {
  86   3                     delay_ms(10);
  87   3                     Runmotor(2000);
  88   3                     Y0=0;
  89   3                     Tohome();
  90   3                     while (1)
  91   3                     {
  92   4                          if(X4!=0&&X2!=0)break;
  93   4                     }
  94   3                     return;
  95   3                }
  96   2           }
  97   1      }
  98          
  99          
 100          void Runmotor(unsigned int num)
 101          {
 102   1           i=0;
 103   1           while(1)
 104   1           {
 105   2                if(i>num)break;
 106   2                PUL=0;
 107   2                Delay100us();
 108   2                Delay100us();
 109   2                Delay100us();
 110   2                PUL=1;
 111   2                Delay100us();
 112   2                Delay100us();
C51 COMPILER V9.55   MAIN                                                                  04/08/2020 22:49:34 PAGE 3   

 113   2                Delay100us();
 114   2                i=i+1;
 115   2           }
 116   1      }
 117          
 118          void Tohome()
 119          {
 120   1           Runmotor(100);
 121   1           while(1)
 122   1           {
 123   2                if(X2==1)return;
 124   2                PUL=0;
 125   2                Delay100us();
 126   2                Delay100us();
 127   2                Delay100us();
 128   2                Delay100us();
 129   2                Delay100us();
 130   2                PUL=1;
 131   2                Delay100us();
 132   2                Delay100us();
 133   2                Delay100us();
 134   2                Delay100us();
 135   2                Delay100us();
 136   2           }
 137   1      }
*** WARNING C294 IN LINE 76 OF c:\Users\Administrator\Documents\Source\MCU\bujin\.\src\main.c: unreachable code


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    189    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
